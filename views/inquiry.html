{% extends "base_layout.html" %}

{% block extra_js %}
<script src="/javascript/controllers/inquiryController.js"></script>
<!-- One day, a smarter person than me will figure out how to get Prism to load
performantly on a site like this. Today is not that day.
<script src="/javascript/third-party/prism.js"></script> -->
<script src="/javascript/directives/prismDirective.js"></script>
{% endblock %}

{% block content %}
<div class="centerable-width centered-margin" ng-controller="inquiryController">
  <div id="header">
    <h3 class="centered-text">
      <a href="https://github.com/<$ inquiry.username $>"><$ inquiry.username $></a> asked if
        <span class="x"><$ inquiry.x | capitalize $></span> has
        <span class="y"><$ inquiry.y $></span> from
        <span class="z"><$ inquiry.z | capitalize $></span>?
    </h3>
    {% if user %}
      <p class="centered-text"><a ng-href="/answer/<$ inquiryId $>">I have an answer for this!</a></p>
    {% else %}
      <p class="centered-text">Log in to submit an answer and/or vote on answers.</p>
    {% endif %}
  </div>

  {% for answer in answers %}
    <div class="media">
      <div class="btn-group-vertical pull-right">
        {% if user %}
          <button type="button" class="btn btn-default" ng-click="upvoteAnswer(<$ answer.id $>)"><span class="glyphicon glyphicon-thumbs-up pull-left"></span>&nbsp;<$ answer.upvotes $></button>
          <button type="button" class="btn btn-default" ng-click="downvoteAnswer(<$ answer.id $>)"><span class="glyphicon glyphicon-thumbs-down pull-left"></span>&nbsp;<$ answer.downvotes $></button>
        {% else %}
          <button type="button" class="btn btn-default" disabled ng-click="upvoteAnswer(<$ answer.id $>)"><span class="glyphicon glyphicon-thumbs-up pull-left"></span>&nbsp;<$ answer.upvotes $></button>
          <button type="button" class="btn btn-default" disabled ng-click="downvoteAnswer(<$ answer.id $>)"><span class="glyphicon glyphicon-thumbs-down pull-left"></span>&nbsp;<$ answer.downvotes $></button>
        {% endif %}
      </div>
      <div class="pull-left">
        <img class="media-object img-rounded comment-user-photo" src="<$ answer.avatar_url $>">
        <p>
          <a href="https://www.github.com/<$ answer.username $>">
            <small class="centered-text"><$ answer.username $></small>
          </a>
        <p>
      </div>
      <div class="media-body media-middle">
          <p>
            <strong><$ answer.answer | capitalize $>,</strong> <$ answer.summary $><br>
            <a>
              {% if user %}
                <small ng-show="!userHasReportedAnswer(<$ answer.id $>)" ng-click="reportAnswer(<$ answer.id $>)">
                  <small class="x">report as unproductive</small>
                </small>
              {% else %}
                <small><small>sign in to report</small></small>
              {% endif %}
            </a>
          </p>
          {% if answer.answer == "yes" %}
              <pre style="width: 49%; float: left;" prism source="<$ answer.x_example $>" class="language-go"></pre>
              <pre style="width: 49%; float: left;" prism source="<$ answer.z_example $>" class="language-go"></pre>
          {% endif %}
      </div>
    </div>
  {% else %}
  {% endfor %}
</div>
{% endblock %}
